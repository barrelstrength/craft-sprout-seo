!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){n(1),n(2),n(3),n(4),n(5),e.exports=n(6)},function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"undefined"===i(Craft.SproutSeo)&&(Craft.SproutSeo={}),Craft.SproutSeo.EditableTable=Garnish.Base.extend({initialized:!1,id:null,baseName:null,columns:null,sorter:null,biggestId:-1,$table:null,$tbody:null,$addRowBtn:null,init:function(e,t,n,i){this.id=e,this.baseName=t,this.columns=n,this.setSettings(i,Craft.SproutSeo.EditableTable.defaults),this.$table=$("#"+e),this.$tbody=this.$table.children("tbody"),this.sorter=new Craft.DataTableSorter(this.$table,{helperClass:"editabletablesorthelper",copyDraggeeInputValuesToHelper:!0}),this.isVisible()?this.initialize():this.addListener(Garnish.$win,"resize","initializeIfVisible")},isVisible:function(){return this.$table.height()>0},initialize:function(){if(!this.initialized){this.initialized=!0,this.removeListener(Garnish.$win,"resize");for(var e=this.$tbody.children(),t=0;t<e.length;t++)new Craft.SproutSeo.EditableTable.Row(this,e[t]);this.$addRowBtn=this.$table.next(".buttons").children(".add"),this.addListener(this.$addRowBtn,"activate","addRow")}},initializeIfVisible:function(){this.isVisible()&&this.initialize()},addRow:function(){var e=this.settings.rowIdPrefix+(this.biggestId+1),t=Craft.SproutSeo.EditableTable.getRowHtml(e,this.columns,this.baseName,{}),n=$(t).appendTo(this.$tbody);new Craft.SproutSeo.EditableTable.Row(this,n),this.sorter.addItems(n),n.find("input,textarea,select").first().focus(),this.settings.onAddRow(n)}},{textualColTypes:["singleline","multiline","number"],defaults:{rowIdPrefix:"",onAddRow:$.noop,onDeleteRow:$.noop},getRowHtml:function(e,t,n,i){var a='<tr data-id="'+e+'">';for(var o in t){var r=t[o],s=n+"["+e+"]["+o+"]",l=void 0!==i[o]?i[o]:"";switch(a+='<td class="'+(Craft.inArray(r.type,Craft.SproutSeo.EditableTable.textualColTypes)?"textual":"")+" "+(void 0!==r.class?r.class:"")+'"'+(void 0!==r.width?' width="'+r.width+'"':"")+">",r.type){case"selectOther":a+=n.indexOf("ownership")>-1?'<div class="field sprout-selectother"><div class="select sprout-selectotherdropdown"><select onchange="setDefault(this)" name="'+s+'">':'<div class="field sprout-selectother"><div class="select sprout-selectotherdropdown"><select name="'+s+'">';var d=!1,u="disabled selected";for(var c in r.options){var h=r.options[c];if(void 0!==h.optgroup)d?a+="</optgroup>":d=!0,a+='<optgroup label="'+h.optgroup+'">';else{var f=void 0!==h.label?h.label:h,p=void 0!==h.value?h.value:c;a+="<option "+u+' value="'+p+'"'+(p===l?" selected":"")+(void 0!==h.disabled&&h.disabled?" disabled":"")+">"+f+"</option>"}u=""}d&&(a+="</optgroup>"),a+="</select></div>",a+='<div class="texticon clearable sprout-selectothertext hidden"><input class="text fullwidth" type="text" name="'+s+'" value="" autocomplete="off"><div class="clear" title="Clear"></div></div>',a+="</div>";break;case"checkbox":a+='<input type="hidden" name="'+s+'"><input type="checkbox" name="'+s+'" value="1"'+(l?" checked":"")+">";break;default:a+='<input class="text fullwidth" type="text" name="'+s+'" value="'+l+'">'}a+="</td>"}return a+='<td class="thin action"><a class="move icon" title="'+Craft.t("sprout-base-fields","Reorder")+'"></a></td><td class="thin action"><a class="delete icon" title="'+Craft.t("sprout-base-fields","Delete")+'"></a></td></tr>'}}),Craft.SproutSeo.EditableTable.Row=Garnish.Base.extend({table:null,id:null,niceTexts:null,$tr:null,$tds:null,$textareas:null,$deleteBtn:null,init:function(e,t){this.table=e,this.$tr=$(t),this.$tds=this.$tr.children();var n=parseInt(this.$tr.attr("data-id").substr(this.table.settings.rowIdPrefix.length));n>this.table.biggestId&&(this.table.biggestId=n),this.$textareas=$(),this.niceTexts=[];var i={},a=0;for(var o in this.table.columns){var r=this.table.columns[o];if(Craft.inArray(r.type,Craft.SproutSeo.EditableTable.textualColTypes)){var s=$("textarea",this.$tds[a]);this.$textareas=this.$textareas.add(s),this.addListener(s,"focus","onTextareaFocus"),this.addListener(s,"mousedown","ignoreNextTextareaFocus"),this.niceTexts.push(new Garnish.NiceText(s,{onHeightChange:$.proxy(this,"onTextareaHeightChange")})),"singleline"!==r.type&&"number"!==r.type||(this.addListener(s,"keypress",{type:r.type},"validateKeypress"),this.addListener(s,"textchange",{type:r.type},"validateValue")),i[o]=s}a++}for(var l in this.initSproutFields(),this.onTextareaHeightChange(),this.table.columns){var d=this.table.columns[l];d.autopopulate&&void 0!==i[d.autopopulate]&&!i[l].val()&&new Craft.HandleGenerator(i[l],i[d.autopopulate])}var u=this.$tr.children().last().find(".delete");this.addListener(u,"click","deleteRow")},initSproutFields:function(){Craft.SproutFields.initFields(this.$tr)},onTextareaFocus:function(e){this.onTextareaHeightChange();var t=$(e.currentTarget);t.data("ignoreNextFocus")?t.data("ignoreNextFocus",!1):setTimeout((function(){var e=t.val();if(void 0!==t[0].setSelectionRange){var n=2*e.length;t[0].setSelectionRange(0,n)}else t.val(e)}),0)},ignoreNextTextareaFocus:function(e){$.data(e.currentTarget,"ignoreNextFocus",!0)},validateKeypress:function(e){var t=e.keyCode?e.keyCode:e.charCode;Garnish.isCtrlKeyPressed(e)||t!==Garnish.RETURN_KEY&&("number"!==e.data.type||Craft.inArray(t,Craft.SproutSeo.EditableTable.Row.numericKeyCodes))||e.preventDefault()},validateValue:function(e){var t;if("number"===e.data.type){var n=e.currentTarget.value.match(/^\s*(-?[\d.]*)/);t=null!==n?n[1]:""}else t=e.currentTarget.value.replace(/[\r\n]/g,"");t!==e.currentTarget.value&&(e.currentTarget.value=t)},onTextareaHeightChange:function(){for(var e=-1,t=0;t<this.niceTexts.length;t++)this.niceTexts[t].height>e&&(e=this.niceTexts[t].height);this.$textareas.css("min-height",e);var n=this.$textareas.first().parent().height();n>e&&this.$textareas.css("min-height",n)},deleteRow:function(){this.table.sorter.removeItems(this.$tr),this.$tr.remove(),this.table.settings.onDeleteRow(this.$tr)}},{numericKeyCodes:[9,8,37,38,39,40,45,91,46,190,48,49,50,51,52,53,54,55,56,57]})},function(e,t){function n(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,r=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var s=function(){function e(t){a(this,e),this.fieldHandle=t.fieldHandle,this.seoBadgeInfo=t.seoBadgeInfo,this.maxDescriptionLength=t.maxDescriptionLength,this.initMetadataFieldButtons(),this.addSeoBadgesToUi()}return r(e,[{key:"initMetadataFieldButtons",value:function(){var e=this,t="fields-"+this.fieldHandle+"-meta-details-tabs";this.metaDetailsTabs=document.querySelectorAll("#"+t+" div.btn");var i="fields-"+this.fieldHandle+"-meta-details-body";if(this.metaDetailsBodyContainers=document.querySelectorAll("#"+i+" div.matrixblock"),!(this.metaDetailsBodyContainers.length<1)){var a,o=n(this.metaDetailsTabs);try{for(o.s();!(a=o.n()).done;){a.value.addEventListener("click",(function(t){var i=$(t.target);i.is("div")||(i=i.closest("div.btn"));var a=$("#fields-projectsMetadata-meta-details-tabs .active");if(i.is(a))return!0;var o,r=i.attr("data-type"),s="#fields-"+e.fieldHandle+"-meta-details-body .fields-"+r,l=document.querySelector(s),d=n(e.metaDetailsTabs);try{for(d.s();!(o=d.n()).done;){o.value.classList.remove("active")}}catch(e){d.e(e)}finally{d.f()}var u,c=n(e.metaDetailsBodyContainers);try{for(c.s();!(u=c.n()).done;){u.value.style.display="none"}}catch(e){c.e(e)}finally{c.f()}$(l).show(),i.addClass("active")}))}}catch(e){o.e(e)}finally{o.f()}$(this.metaDetailsBodyContainers[0]).show(),this.metaDetailsTabs[0].classList.add("active")}}},{key:"addSeoBadgesToUi",value:function(){for(var e in this.seoBadgeInfo){var t=this.seoBadgeInfo[e].type,n=this.seoBadgeInfo[e].handle,i=this.seoBadgeInfo[e].badgeClass,a=$("div."+i).html(),o="#fields-"+n+"-label",r=$("#fields-"+n+"-field input");if("title"===n&&(o="#title-label",r=$("#title")),this.appendSeoBadge(o,a),Craft.initUiElements($(o)),"optimizedTitleField"===t&&(r.attr("maxlength",60),new Garnish.NiceText(r,{showCharsLeft:!0})),"optimizedDescriptionField"===t){var s=$("#fields-"+n+"-field textarea");s.attr("maxlength",this.maxDescriptionLength),new Garnish.NiceText(s,{showCharsLeft:!0})}}}},{key:"getCustomizationSettings",value:function(e){return $("input[name='fields["+this.fieldHandle+"][metadata]["+e+"]']")}},{key:"appendSeoBadge",value:function(e,t){0===$(e).find(".sproutseo-info").length&&$(e).append(t).removeClass("hidden")}}]),e}(),l=function(){function e(t){a(this,e),this.keywordsFieldId=t.keywordsFieldId,this.initKeywordsField()}return r(e,[{key:"initKeywordsField",value:function(){$(this.keywordsFieldId+" input").tagEditor({animateDelete:20})}}]),e}();window.SproutSeoMetadataField=s,window.SproutSeoKeywordsField=l},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;this.fieldHandle=t.fieldHandle,this.selectFieldId=t.selectFieldId;var i="#fields-"+this.fieldHandle+"-meta-details-body "+this.selectFieldId,a=document.querySelector(i);if(null!==a){var o=a.options[a.selectedIndex].value;this.currentContainerId=this.getTargetContainerId(o),this.currentContainer=document.getElementById(this.currentContainerId),this.currentContainer&&this.currentContainer.classList.remove("hidden"),a.addEventListener("change",(function(e){n.toggleOpenGraphFieldContainer(e,n)}))}}var t,i,a;return t=e,(i=[{key:"toggleOpenGraphFieldContainer",value:function(e,t){var n=e.target,i=n.options[n.selectedIndex].value,a=t.getTargetContainerId(i),o=document.getElementById(a);o&&o.classList.remove("hidden"),t.currentContainer&&t.currentContainer.classList.add("hidden"),t.currentContainerId=a,t.currentContainer=o}},{key:"getTargetContainerId",value:function(e){return"#fields-"+e}}])&&n(t.prototype,i),a&&n(t,a),e}();window.MetaDetailsToggle=i},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=t.items,this.mainEntityValues=t.mainEntityValues,this.initLegacyCode(),this.initOtherLegacyCode()}var t,i,a;return t=e,(i=[{key:"initLegacyCode",value:function(){var e=this,t=$(".mainentity-firstdropdown select"),n=$(".mainentity-seconddropdown select"),i="";t.on("change",(function(){var a,o;i=t.val(),a=$(".organization-info :input"),o=1,$.each(a,(function(e,t){e>=o&&$(t).html("")})),function(e,t){$.each(e,(function(e,n){e>=t&&$(n).closest("div.organizationinfo-dropdown").addClass("hidden")}))}($(".organization-info :input"),1),void 0===e.items[i]||""===i||e.items[i].length<=0||e.items[i]&&(n.closest("div.organizationinfo-dropdown").removeClass("hidden"),function(e,t){var n="",i="";$.each(t,(function(e,t){i=e.replace(/([A-Z][^A-Z\b])/g," $1").trim(),n+='<option value="'+e+'">'+i+"</option>",t&&$.each(t,(function(e,t){i="&nbsp;&nbsp;&nbsp;"+e.replace(/([A-Z][^A-Z\b])/g," $1").trim(),n+='<option value="'+e+'">'+i+"</option>"}))})),e.append(n)}(n,e.items[i]))})),n.on("change",(function(){n.val()}))}},{key:"initOtherLegacyCode",value:function(){var e=this.mainEntityValues;$(".mainentity-firstdropdown select").change((function(){"barrelstrength-sproutseo-schema-personschema"===this.value?$(".mainentity-seconddropdown select").addClass("hidden"):$(".mainentity-seconddropdown select").removeClass("hidden")})),e&&(e.hasOwnProperty("schemaTypeId")&&e.schemaTypeId&&$(".mainentity-firstdropdown select").val(e.schemaTypeId).change(),e.hasOwnProperty("schemaOverrideTypeId")&&e.schemaOverrideTypeId&&$(".mainentity-seconddropdown select").val(e.schemaOverrideTypeId).change())}}])&&n(t.prototype,i),a&&n(t,a),e}();window.SproutSeoWebsiteIdentitySettings=i},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=t.items,this.websiteIdentity=t.websiteIdentity,this.firstDropdownId=t.firstDropdownId,this.secondDropdownId=t.secondDropdownId,this.thirdDropdownId=t.thirdDropdownId,this.initWebsiteIdentityField(),this.moreWebsiteIdentityStuff()}var t,i,a;return t=e,(i=[{key:"initWebsiteIdentityField",value:function(){var e=this,t=$(this.firstDropdownId),n=$(this.secondDropdownId),i=$(this.thirdDropdownId),a="",o="";t.on("change",(function(){a=t.val(),e.clearDropDown($("#organization :input"),1),e.disableDropDown($("#organization :input"),1),""!==a&&e.items[a].hasOwnProperty("children")&&(e.enableDropDown(n),e.generateOptions(n,e.items[a].children))})),n.on("change",(function(){if(a=$("#main-entity-first-dropdown").val(),o=n.val(),e.clearDropDown($("#organization :input"),2),e.disableDropDown($("#organization :input"),2),""!==o)for(var t=e.items[a].children,r=0;r<t.length;r++)if(t[r].name===o){t[r].hasOwnProperty("children")&&(e.enableDropDown(i),e.generateOptions(i,t[r].children));break}}))}},{key:"moreWebsiteIdentityStuff",value:function(){var e=this.websiteIdentity;e&&(e.hasOwnProperty("organizationSubTypes")&&e.organizationSubTypes[0]&&$("#main-entity-first-dropdown").val(e.organizationSubTypes[0]).trigger("change"),e.hasOwnProperty("organizationSubTypes")&&e.organizationSubTypes[1]&&$("#main-entity-second-dropdown").val(e.organizationSubTypes[1]).trigger("change"),e.hasOwnProperty("organizationSubTypes")&&e.organizationSubTypes[2]&&$("#main-entity-third-dropdown").val(e.organizationSubTypes[2]).trigger("change")),$("#identityType").change((function(){"Person"===this.value?($(".person-info").removeClass("hidden"),$(".organization-info").addClass("hidden")):($(".person-info").addClass("hidden"),$(".organization-info").removeClass("hidden")),"Organization"===this.value?($(".organization-info").removeClass("hidden"),$(".person-info").addClass("hidden"),"LocalBusiness"===$("#main-entity-first-dropdown").val()&&$("#localbusiness").removeClass("hidden")):($(".organization-info").addClass("hidden"),$(".person-info").removeClass("hidden"))})),$("#main-entity-first-dropdown").change((function(){"LocalBusiness"===this.value?$("#localbusiness").removeClass("hidden"):$("#localbusiness").addClass("hidden")}))}},{key:"clearDropDown",value:function(e,t){$.each(e,(function(e,n){e>=t&&$(n).html('<option value="" selected="selected"></option>')}))}},{key:"disableDropDown",value:function(e,t){$.each(e,(function(e,n){e>=t&&$(n).closest("div.organizationinfo-dropdown").addClass("hidden")}))}},{key:"enableDropDown",value:function(e){e.closest("div.organizationinfo-dropdown").removeClass("hidden")}},{key:"generateOptions",value:function(e,t){for(var n="",i="",a=0;a<t.length;a++)i=t[a].name.replace(/([A-Z][^A-Z\b])/g," $1").trim(),n+='<option value="'+t[a].name+'">'+i+"</option>";e.append(n)}}])&&n(t.prototype,i),a&&n(t,a),e}();window.SproutSeoWebsiteIdentity=i},function(e,t){}]);