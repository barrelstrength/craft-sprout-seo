{% extends "sproutseo/_layouts/general" %}
{% import "_includes/forms" as forms %}

{% set title = "Meta Tags"|t %}

{% set metaTagGroups = craft.sproutSeo.getMetaTagGroups %}

{% set selectedSidebarItem = craft.request.getSegment(2) %}

{% set extraPageHeaderHtml %}
	<div class="buttons">
		<a class="btn submit add icon" href="{{ url('sproutseo/globals/meta-tags/new') }}">{{ "New Meta Tag Group"|t }}</a>
	</div>
{% endset %}

{% set content %}

<style>
.included-fields {
	color: #999;
}
</style>

	{% if metaTagGroups is empty %}

		<p>{{ "Create your first Meta Tag Group."|t }}</p>

	{% else %}

		<table class="data" id="metaTemplate">
			<thead>
				<th width="15%">{{ "Name"|t }}</th>
				<th width="15%">{{ "Handle"|t }}</th>
				<th width="5%">{{ "Global Fallback"|t }}</th>
				<th width="50%"></th>
				<td class="thin"></td>
			</thead>

			{% for metaTagGroup in metaTagGroups %}

			<tr id="results" data-id="{{ metaTagGroup.id }}" data-name="{{ metaTagGroup.name|t }}">
				<td>
					<a href="{{ url('sproutseo/globals/meta-tags/' ~ metaTagGroup.id) }}">
						{{ metaTagGroup.name }}
					</a>
				</td>
				<td><code>{{ metaTagGroup.handle }}</code></td>
				<td>
					{% if metaTagGroup.globalFallback %}
						<span data-icon="check" title="{{ 'Yes'|t }}"></span>
					{% endif %}
				</td>
				<td class="included-fields">

				</td>
				<td class="thin">
					<a class="delete icon" title="{{ 'Delete'|t }}"></a>
				</td>
			</tr>

			{% endfor %}

		</table>

	{% endif %}

{% endset %}

{% set js %}
	new Craft.AdminTable({
		tableSelector: '#metaTemplate',
		deleteAction: 'sproutSeo/metaTags/deleteMetaTagGroupById',
		onDeleteObject: function(id)
		{
			if($('#metaTemplate').find('tbody').find('tr').size() == 0)
			{
				$('#metaTemplate').show();
				$('#metaTemplate').find('tbody').html('<tr id="no-sproutseo-results"><td colspan="4">{{ "No results found."|t
		}}</td></tr>');
			}
		}
	});

{% endset %}
{% includeJs js %}
