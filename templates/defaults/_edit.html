{% extends "sproutseo/_layouts/base" %}
{% set centered = true %}

{% set title %}
	New Default - {{ craft.SproutSeo.name }}
{% endset %}

{% set tabs = {
	  default: {
      label: "Default Settings"|t,
      url: '#default-main'
    },
    main: {
      label: "Basic Info"|t,
      url: '#default-basic'
    },
    publishinfo:    {
      label: "Robots"|t,
      url: '#default-robots'
    },
    location:    {
      label: "Location"|t,
      url: '#default-location'
    },
    facebook:    {
      label: "Facebook"|t,
      url: '#default-facebook'
    },
    twitter:    {
      label: "Twitter"|t,
      url: '#default-twitter'
    }
} %}

{% import "_includes/forms" as forms %}

{# @TODO abstract this to the controller #}
{% if defaultId is not defined %}
	{% set defaultId = null %}
{% endif %}

{# @TODO abstract this to the controller #}
{% if default is not defined %}
	{% set default = craft.sproutSeo.getDefaultById(defaultId) %}
{% endif %}



{% set body %}

<form method="post" action="" accept-charset="UTF-8" data-saveshortcut="1" data-saveshortcut-redirect="{{ craft.request.url }}">
	<input type="hidden" name="action" value="sproutSeo/defaults/saveDefault">
	<input type="hidden" name="redirect" value="sproutseo/defaults">

	<input type="hidden" name="default_fields[id]" value="{{ defaultId }}">

<div id="default-main">

	{{ forms.textField({
		label: "Name"|t,
		instructions: "Human readable default name"|t,
		id: "name",
		name: 'default_fields[name]',
		value: default.name,
		errors: '',
		required: true
	}) }}

	{{ forms.textField({
		label: "Short Name"|t,
		instructions: "Short name you will use to refer to your defaults in the code"|t,
		id: "handle",
		name: 'default_fields[handle]',
		value: default.handle,
		errors: '',
		required: true
	}) }}

	{% set canBeGlobalFallback = craft.sproutSeo.displayGlobalFallback(defaultId) %}

	{% if canBeGlobalFallback %}
		{{ forms.checkboxField({
			label: "Use this default as my global fallback"|t,
			id: 'global-fallback',
			name: 'default_fields[globalFallback]',
			checked: default.globalFallback
		}) }}
	{% endif %}

</div>

<div id="default-basic" class="hidden">

	{{ forms.textField({
		label: "Title"|t,
		name: 'default_fields[title]',
		instructions: "The Title will appear in your browser tab, and as the primary Heading in your search results"|t,
		value: default.title,
		errors: "",
		required: false
	}) }}

	{{ forms.checkboxField({
	  label: 'Append Site Name "' ~ siteName ~ '" to all Titles'|t,
	  name: 'default_fields[appendSiteName]',
	  checked: (default.appendSiteName == 1 ? 1 : 0),
	  errors: ''
	}) }}

	{{ forms.textField({
		label: "Description"|t,
		instructions: "A 140 word description of your content which will appear as the description in your search results."|t,
		name: 'default_fields[description]',
		value: default.description,
		errors: "",
		required: false
	}) }}

	{{ forms.textField({
		label: "Keywords"|t,
		instructions: "A list of keywords that describe your content"|t,
		name: 'default_fields[keywords]',
		value: default.keywords,
		errors: "",
		required: false
	}) }}

</div>

<div id="default-robots" class="hidden">

	<h3>Robots - Basic</h3>

	{% macro isSelected(target, string) %}
		{% if target in string %}checked="checked"{% endif %}
	{% endmacro %}
	{% import _self as checkbox %}


	<div>
			<label>
				<input type="checkbox" value="noindex" id="" class="checkbox" name="default_fields[robots][]" {{ checkbox.isSelected('noindex', default.robots) }}> noindex
			</label>
			<span class="info">I don't want this page to be indexed by search engines</span>
	</div>
	<div>
			<label>
				<input type="checkbox" value="nofollow" id="" class="checkbox" name="default_fields[robots][]" {{ checkbox.isSelected('nofollow', default.robots) }}> nofollow
			</label>
			<span class="info">I don't want search engines to follow links on this page</span>
	</div>

	<h3>Robots - Advanced</h3>

	{# Consider adding a link or posting a help article in our docs to clarify these:
	http://tech4sky.com/noodp-noarchive-nosnippet-noydir-meta-tag #}

	<div>
			<label>
				<input type="checkbox" value="noarchive" id="" class="checkbox" name="default_fields[robots][]" {{ checkbox.isSelected('noarchive', default.robots) }}> noarchive
			</label>
			<span class="info">I don't want search engines to provide archived versions of this page to users</span>
	</div>
	<div>
			<label>
				<input type="checkbox" value="noimageindex" id="" class="checkbox" name="default_fields[robots][]" {{ checkbox.isSelected('noimageindex', default.robots) }}> noimageindex
			</label>
			<span class="info">I don't want images on this page to be indexed by search engines</span>
	</div>
	<div>
			<label>
				<input type="checkbox" value="nosnippet" id="" class="checkbox" name="default_fields[robots][]" {{ checkbox.isSelected('nosnippet', default.robots) }}> nosnippet
			</label>
			<span class="info">I don't want Google to cache this page or display a description below the page in search results</span>
	</div>
	<div>
			<label>
				<input type="checkbox" value="noodp" id="" class="checkbox" name="default_fields[robots][]" {{ checkbox.isSelected('noodp', default.robots) }}> noodp
			</label>
			<span class="info">I don't want Google to use the Open Directory Project (ODP) description for this page. I want Google to use the description on the website.</span>
	</div>
	<div>
			<label>
				<input type="checkbox" value="noydir" id="" class="checkbox" name="default_fields[robots][]" {{ checkbox.isSelected('noydir', default.robots) }}> noydir
			</label>
			<span class="info">I don't want Bing or Yahoo! to use the Yahoo! Directory titles and descriptions for this page.  I want Bing and Yahoo! to use the titles and descriptions on the website.</span>
	</div>

	<h3>Canonical URL</h3>

	<p style="width:50%;">Canonical URL will default to the URL of the current page.  Canonical URL cannot be overriden at the template level, however, it can be override with on-page or entry-specific overrides.</p>


</div>

<div id="default-location" class="hidden">
	{{ forms.textField({
		label: "Region"|t,
		name: 'default_fields[region]',
		value: default.region,
		errors: "",
		required: false
	}) }}

	{{ forms.textField({
		label: "Placename"|t,
		name: 'default_fields[placename]',
		value: default.placename,
		errors: "",
		required: false
	}) }}

	{{ forms.textField({
		label: "Latitude"|t,
		name: 'default_fields[latitude]',
		value: default.latitude,
		errors: "",
		required: false
	}) }}

	{{ forms.textField({
		label: "Longitude"|t,
		name: 'default_fields[longitude]',
		value: default.longitude,
		errors: "",
		required: false
	}) }}

</div>

<div id="default-facebook" class="hidden">

	{% set ogTypesOptions = {
    '' : 'Select Open Graph Type...',
	    'website' : 'Website',
	    'article' : 'Article',
	  } %}

	<h2>Open Graph Type</h2>

	{{ forms.selectField({
		name: 'default_fields[ogType]',
		options: ogTypesOptions,
		value: default.ogType,
		errors: "",
		required: false
	}) }}

	<p>Learn more about Open Graph here: <a href="https://developers.facebook.com/docs/opengraph" target="_blank">https://developers.facebook.com/docs/opengraph</a>.</p>

	<hr />

	<h2>Basic Metadata</h2>

	{{ forms.textField({
		label: "Title"|t,
		instructions: "The title of your object as it should appear within the graph, e.g., 'The Rock'.",
		name: 'default_fields[ogTitle]',
		value: default.ogTitle,
		errors: "",
		required: false
	}) }}

	{{ forms.textField({
		label: "Image"|t,
		instructions: "An image URL which should represent your object within the graph.",
		name: 'default_fields[ogImage]',
		value: default.ogImage,
		errors: "",
		required: false
	}) }}

	{{ forms.textField({
		label: "URL"|t,
		instructions: "The canonical URL of your object that will be used as its permanent ID in the graph.",
		name: 'default_fields[ogUrl]',
		value: default.ogUrl,
		errors: "",
		required: false
	}) }}

	<hr />

	<h2>Optional Metadata</h2>

	{{ forms.textField({
		label: "Site Name"|t,
		instructions: "If your object is part of a larger web site, the name which should be displayed for the overall site.",
		name: 'default_fields[ogSiteName]',
		value: default.ogSiteName,
		errors: "",
		required: false
	}) }}

	{{ forms.textField({
		label: "Description"|t,
		instructions: "A one to two sentence description of your object.",
		name: 'default_fields[ogDescription]',
		value: default.ogDescription,
		errors: "",
		required: false
	}) }}

	{{ forms.textField({
		label: "Locale"|t,
		instructions: "The locale these tags are marked up in. Of the format language_TERRITORY. Default is en_US.",
		name: 'default_fields[ogLocale]',
		value: default.ogLocale,
		errors: "",
		required: false
	}) }}

	{{ forms.textField({
		label: "Audio"|t,
		instructions: "A URL to an audio file to accompany this object.",
		name: 'default_fields[ogAudio]',
		value: default.ogAudio,
		errors: "",
		required: false
	}) }}

	{{ forms.textField({
		label: "Video"|t,
		instructions: "A URL to a video file that complements this object.",
		name: 'default_fields[ogVideo]',
		value: default.ogVideo,
		errors: "",
		required: false
	}) }}

	<hr>

</div>

<div id="default-twitter" class="hidden">

	{% set twitterCardOptions = {
		'' : 'Select Twitter Card Type...',
		'summary' : 'Summary Card',
		'summary-large-image' : 'Summary Card with Large Image',
		'player' : 'Player Card',
		'photo' : 'Photo Card',
	} %}

	<h2>Twitter Card Type</h2>

	{{ forms.selectField({
		name: 'default_fields[twitterCard]',
		options: twitterCardOptions,
		value: (default.twitterCard is defined ? default.twitterCard : 'summary'),
		value: default.twitterCard,
		errors: "",
		required: false
	}) }}

	<p>Learn about Twitter Cards here: <a href="https://dev.twitter.com/docs/cards" target="_blank">https://dev.twitter.com/docs/cards</a>.</p>

	<hr>

	<h2>Global Card Options</h2>

	{{ forms.textField({
		label: "Site"|t,
		name: 'default_fields[twitterSite]',
		instructions: "The Twitter username of the owner of this card's domain.",
		value: default.twitterSite,
		errors: "",
		required: false
	}) }}

	{{ forms.textField({
		label: "Creator"|t,
		name: 'default_fields[twitterCreator]',
		instructions: "If the content of this card was authored by someone, include their Twitter username here.",
		value: default.twitterCreator,
		errors: "",
		required: false
	}) }}

	{{ forms.textField({
		label: "Title"|t,
		name: 'default_fields[twitterTitle]',
		instructions: 'The title of your content as it should appear in the card.',
		value: default.twitterTitle,
		errors: "",
		required: false
	}) }}

	{{ forms.textareaField({
		label: "Description"|t,
		name: 'default_fields[twitterDescription]',
		instructions: 'A description of the content in a maximum of 200 characters.',
		value: default.twitterDescription,
		errors: "",
		required: false
	}) }}



	<div id="twitter-summary" class="hidden">

		<h2>Summary Card Specific</h2>

		{{ forms.textField({
			label: "Image Source"|t,
			name: 'default_fields[twitterSummaryImageSource]',
			instructions: 'A URL to the image representing the content.',
			value: default.twitterSummaryImageSource,
			errors: "",
			required: false
		}) }}

		<hr>

	</div>

	<div id="twitter-summary-large-image" class="hidden">

		<h2>Summary Card with Large Image Specific</h2>

		{{ forms.textField({
			label: "Image Source"|t,
			name: 'default_fields[twitterSummaryLargeImageImageSource]',
			instructions: 'A URL to the image representing the content.',
			value: default.twitterSummaryLargeImageImageSource,
			errors: "",
			required: false
		}) }}

		<hr>

	</div>

	<div id="twitter-photo" class="hidden">

		<h2>Photo Card Specific</h2>

		{{ forms.textField({
			label: "Image Source"|t,
			name: 'default_fields[twitterPhotoImageSource]',
			instructions: 'A URL to the image representing the content.',
			value: default.twitterPhotoImageSource,
			errors: "",
			required: false
		}) }}

		<hr />

	</div>

	<div id="twitter-player" class="hidden">

		<h2>Player Card Specific</h2>

		{{ forms.textField({
			label: "Image Source"|t,
			name: 'default_fields[twitterPlayerImageSource]',
			instructions: 'A URL to the image representing the content.',
			value: default.twitterPlayerImageSource,
			errors: "",
			required: false
		}) }}

		{{ forms.textField({
			label: "Player"|t,
			name: 'default_fields[twitterPlayer]',
			instructions: "HTTPS URL to iframe player. This must be a HTTPS URL which does not generate mixed content warnings in a web browser..",
			value: default.twitterPlayer,
			errors: "",
			required: false
		}) }}

		{{ forms.textField({
			label: "Stream"|t,
			name: 'default_fields[twitterPlayerStream]',
			instructions: "URL to raw stream that will be rendered in Twitter's Mobile App Integrationlications directly. If provided, the stream must be delivered in the MPEG-4 container format.",
			value: default.twitterPlayerStream,
			errors: "",
			required: false
		}) }}

		{{ forms.textField({
			label: "Stream Content Type"|t,
			name: 'default_fields[twitterPlayerStreamContentType]',
			instructions: "The MIME type subtype combination that describes the content contained in twitter player stream.",
			value: default.twitterPlayerStreamContentType,
			errors: "",
			required: false
		}) }}

		{{ forms.textField({
			label: "Height"|t,
			name: 'default_fields[twitterPlayerHeight]',
			instructions: "Height of IFRAME specified in twitter player in pixels.",
			value: default.twitterPlayerHeight,
			errors: "",
			required: false
		}) }}

		{{ forms.textField({
			label: "Width"|t,
			name: 'default_fields[twitterPlayerWidth]',
			instructions: 'Width of IFRAME specified in twitter player in pixels.',
			value: default.twitterPlayerWidth,
			errors: "",
			required: false
		}) }}

		<hr />

	</div>

</div>

<div class="buttons">
	<input class="btn submit" type="submit" value="Save Default">
</div>

</form>

{% endset %}

{% if default.name is not defined or not default.handle %}
	{% includeJs "new Craft.HandleGenerator('#name', '#handle');" %}
{% endif %}

{% includeJsResource "sproutseo/js/default.js" %}

{% set js %}

	new Craft.SproutSeoDefault();

{% endset %}

{% includeJs js %}
